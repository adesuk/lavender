<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
  <h:body>
    <ui:composition template="/WEB-INF/templates/BasicTemplate.xhtml">
      <ui:define name="content">
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <f:view>
                <h:form styleClass="form-horizontal">
                  <h2>Periode Pelaksanaan Seminar/Sidang</h2>
                  <hr />
                  
                  <!-- Periode Jadwal -->
                  <div class="form-group">
                    <h:outputLabel styleClass="col-md-2">
                      <h:outputText value="Periode jadwal" /> <span class="required">*</span>
                    </h:outputLabel>
                    <div class="col-md-3">
                      <p:selectOneMenu value="#{pengelolaanPeriode.selectedPeriode}"
                                       converter="#{periodeConverter}"
                                       style="width: 100%">
                        <f:selectItem itemLabel="All" />
                        <f:selectItems value="#{pengelolaanPeriode.periodes1}"
                                       var="item" itemLabel="#{pengelolaanJadwal.formatnya(item)}"
                                       itemValue="#{item}" />
                      </p:selectOneMenu>
                    </div>
                  </div>
                  
                  <!-- Keyword -->
                  <div class="form-group">
                    <h:outputLabel styleClass="col-md-2">
                      <h:outputText value="Nama periode" />
                    </h:outputLabel>
                    <div class="col-md-3">
                      <p:inputText id="namaPeriode" style="width: 100%"
                                    value="#{pengelolaanPeriode.keyword}" />
                    </div>
                  </div>
                  
                  <!-- Tombol-tombol itu -->
                  <div class="form-group">
                    <div class="col-md-offset-7 col-md-5">
                      <!-- Button cari -->
                      <p:commandButton value="Cari"
                                       style="margin: 0 5px; width: 90px;">
                        <f:ajax event="click" render="@form jadwalArea"
                                listener="#{pengelolaanPeriode.cariListener}" />
                      </p:commandButton>
                      <!-- Button tambah -->
                      <!--<p:commandButton value="Tambah" type="button"
                                       style="margin: 0 5px; width: 90px;"
                                       onclick="PF('periodeDialog').show()"
                                       actionListener="#{pengelolaanPeriode.initializePeriode()}"
                                       update=":dialogInputForm">
                        <p:resetInput target=":dialogInputForm" />
                      </p:commandButton>-->
                      <p:button value="Add" outcome="TambahPeriode.xhtml"
                                style="margin: 0 5px; width: 90px;" />
                      <p:commandButton value="Delete" style="margin: 0 5px; width: 90px;"
                                       action="#{pengelolaanPeriode.deletePeriode}"/>
                    </div>
                  </div>
                  
                  <!-- Table itu -->
                  <h:panelGroup layout="block" id="jadwalArea">
                      <p:dataTable id="periodes" var="periode" value="#{pengelolaanPeriode.periodes2}"
                                   editable="true">
                        <p:ajax event="rowEdit" listener="#{pengelolaanPeriode.onEdit}" />
                        <p:column headerText="">
                          <f:facet name="header">
                            <h:outputText value="" />
                          </f:facet>
                          <p:selectBooleanCheckbox value="#{periode.selected}" />
                        </p:column>
                        <p:column headerText="Nama Periode">
                          <p:cellEditor>
                            <f:facet name="output">
                              <h:outputText value="#{periode.namaPeriode}" />
                            </f:facet>
                            <f:facet name="input">
                              <p:inputText value="#{periode.namaPeriode}" style="width:100%" />
                            </f:facet>
                          </p:cellEditor>
                        </p:column>
                        <p:column headerText="Periode Awal">
                          <p:cellEditor>
                            <f:facet name="output">
                              <h:outputText value="#{periode.periodeAwal}">
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                              </h:outputText>
                            </f:facet>
                            <f:facet name="input">
                              <p:calendar value="#{periode.periodeAwal}"
                                          pattern="dd/MM/yyyy"
                                          style="width:100%" />
                            </f:facet>
                          </p:cellEditor>
                        </p:column>
                        <p:column headerText="Periode Akhir">
                          <p:cellEditor>
                            <f:facet name="output">
                              <h:outputText value="#{periode.periodeAkhir}">
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                              </h:outputText>
                            </f:facet>
                            <f:facet name="input">
                              <p:calendar value="#{periode.periodeAkhir}"
                                          pattern="dd/MM/yyyy"
                                          style="width:100%" />
                            </f:facet>
                          </p:cellEditor>
                        </p:column>
                        <p:column headerText="Tipe Periode">
                          <f:facet name="output">
                            <h:outputText value="#{periode.tipeJadwal}" />
                          </f:facet>
                          <f:facet name="input">

                          </f:facet>
                        </p:column>
                        <p:column headerText="Status Verifikasi">
                          <f:facet name="output">
                            <h:outputText value="#{periode.statusVerifikasi}" />
                          </f:facet>
                          <f:facet name="input">

                          </f:facet>
                        </p:column>
                        <p:column headerText="Status Rilis">
                          <f:facet name="output">
                            <h:outputText value="#{periode.statusRilis}" />
                          </f:facet>
                        </p:column>
                        <p:column style="width: 5%">
                          <p:rowEditor />
                        </p:column>
                      </p:dataTable>
                  </h:panelGroup>
                </h:form>
                
                <!-- Untuk tambah baru nya ini -->
                <p:dialog id="newPeriodeDialog" header="Periode Pelaksanaan Seminar/Sidang" 
                          widgetVar="periodeDialog" resizable="false"  
                          width="600">
                  <h:form class="form-horizontal" id="dialogInputForm">
                    <div class="form-group">
                      <h:outputLabel styleClass="col-md-offset-2 col-md-3">
                        <h:outputText value="Nama periode" /> <span class="required">*</span>
                      </h:outputLabel>
                      <div class="col-md-4">
                        <p:inputText value="#{pengelolaanPeriode.periode.namaPeriode}" />
                      </div>
                    </div>

                    <div class="form-group">
                      <h:outputLabel styleClass="col-md-offset-2 col-md-3">
                        <h:outputText value="Periode awal" /> <span class="required">*</span>
                      </h:outputLabel>
                      <div class="col-md-4">
                        <p:calendar id="periodeAwal" 
                                    value="#{pengelolaanPeriode.periode.periodeAwal}"
                                    pattern="dd/MM/yyyy" />
                      </div>
                    </div>

                    <div class="form-group">
                      <h:outputLabel styleClass="col-md-offset-2 col-md-3">
                        <h:outputText value="Periode akhir" /> <span class="required">*</span>
                      </h:outputLabel>
                      <div class="col-md-4">
                        <p:calendar id="periodeAkhir" 
                                    value="#{pengelolaanPeriode.periode.periodeAkhir}"
                                    pattern="dd/MM/yyyy" />
                      </div>
                    </div>

                    <div class="form-group">
                      <h:outputLabel styleClass="col-md-offset-2 col-md-3">
                        <h:outputText value="Tipe jadwal" /> <span class="required">*</span>
                      </h:outputLabel>
                      <div class="col-md-4">
                        <p:inputText value="#{pengelolaanPeriode.periode.tipeJadwal}" />  
                      </div>
                    </div>

                    <div class="form-group">
                      <div class="col-md-offset-5 col-md-4">
                        <p:commandButton value="Simpan" styleClass="ui-priority-primary"
                                         action="#{pengelolaanPeriode.savePeriode()}"
                                         oncomplete="PF('periodeDialog').hide();">
                        </p:commandButton>
                      </div>
                    </div>
                  </h:form>
                  <p:ajax event="close" update="newPeriodeDialog"
                          listener="#{pengelolaanPeriode.handleClose()}" />
                </p:dialog>  
              </f:view>
            </div>
          </div>
        </div>
      </ui:define>>
    </ui:composition>
  </h:body>
</html>

